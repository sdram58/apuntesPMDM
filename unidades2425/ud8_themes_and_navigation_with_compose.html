<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Themes and Navigation with Jetpack Compose</title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
  <link rel="stylesheet" href="../styles/prism.css">
  <link rel="stylesheet" href="../styles/styles.css">
  <script src="../script/script.js"></script>
</head>


<body class="line-numbers">
  <div class="logos"></div>

  <nav id="menu-lateral" class="main-menu-lateral oculto">
    <div class="fila">
      <a href="#sNavegacion" title="1. Navigation">1.- Navigation</a>
      <a href="#sDisenosAdaptativos" title="2. Adaptive Designs">2.- Adaptive Designs</a>
      <a href="#sSplashScreen" title="3. Splash Screen">3.- Splash Screen</a>
    </div>
    <div class="fila">
      <a href="#sOnboarding" title="4. Onboarding">4.- Onboarding</a>
      <a href="#sTemas" title="5. Themes">5.- Themes</a>
      <a href="#sAnimaciones" title="6. Animations">6.- Animations</a>
    </div>

  </nav> <!-- BTM_MENU-->

  <h1>U8.- Themes and Navigation with Jetpack Compose</h1>  

  <div class="main-menu">
    <div class="fila">
      <a href="#sNavegacion" title="1. Navigation">1.- Navigation</a>
      <a href="#sDisenosAdaptativos" title="2. Adaptive Designs">2.- Adaptive Designs</a>
      <a href="#sSplashScreen" title="3. Splash Screen">3.- Splash Screen</a>
    </div>
    <div class="fila">
      <a href="#sOnboarding" title="4. Onboarding">4.- Onboarding</a>
      <a href="#sTemas" title="5. Themes">5.- Themes</a>
      <a href="#sAnimaciones" title="6. Animations">6.- Animations</a>
    </div>
  </div>

  <!--*********************************************************NavegaciÃ³n***********************************************************-->
<section class="apartado">
  <a name="sNavegacion"></a>
  <h2>Navigation</h2>
  
<p>With the traditional <span class="negrita">Android (Views)</span> programming, each screen of the application was implemented in a
  <span class="negrita">different Activity</span>.</p>

<p>This required the use of navigation graphs, instructions for starting Activities,
  creating elements to send information to the new window, and to receive information upon closing the window.</p>

<p>With <span class="negrita">Jetpack Compose</span>, the entire navigation process is simplified because the structure of a 
  <span class="subrayado">Compose-developed application is based on a <span class="negrita">Single Activity</span></span>.</p>

<p><span class="negrita">Single Activity</span> means that <span class="negrita">there is only one Activity managing all interface elements</span>,
  which are divided into different Compose components in Jetpack Compose.</p>

<p>From this point on, it is very important to have all your application code organized into folders.</p>

<p>To do this, you can create a folder named <span class="negrita">screens</span> inside <span class="negrita">ui</span> where you place the different components of each screen.</p>
<p>Inside the <span class="negrita">screens</span> folder, you can directly keep the <span class="d-word">.kt</span> files for each screen, or you can create new folders if each screen is composed of multiple <span class="d-word">.kt</span> files.</p>

<figure><img src="UD8/images/ud8-2023-11-20-16-13-29.png" /><br><figcaption></figcaption></figure>
<br>

<p>The example to be studied is an application with two screens.</p>
<p>The first screen will show a <span class="r-word">TextField</span> for entering a <span class="cursiva">name</span> and a <span class="cursiva">button</span> to <span class="subrayado">navigate to the second screen while sending it the name</span>.</p>
<p>The second screen will display the received name and a button to go back.</p>

<figure><img src="UD8/images/ud8-2023-11-20-17-20-47.png" /><br><figcaption></figcaption></figure>
<br>

<p>To implement navigation with Jetpack Compose, you must add the following dependency:
  <ul>
    <li><span class="inline-file">libs.versions.toml</span><ul>
      <li><span class="cursiva">[version]</span> section
        <section><pre><code class="language-kotlin">navigation = "2.8.5"
serialization = "1.6.3"
</code></pre>
        </section>
      </li>
      <li><span class="cursiva">[libraries]</span> section
      <section><pre><code class="language-kotlin">androidx-navigation = { group = "androidx.navigation", name = "navigation-compose", version.ref="navigation" }
kotlinx-serialization-json = { module = "org.jetbrains.kotlinx:kotlinx-serialization-json", version.ref = "serialization"}</code></pre>
      </section></li>
      <li><span class="cursiva">[plugins]</span> section.
      <section><pre><code class="language-kotlin">kotlin-serialization = { id = "org.jetbrains.kotlin.plugin.serialization", version.ref = "kotlin" }</code></pre>
      </section></li>
    </ul></li>
    <li><span class="inline-file">build.gradle.kts (Module:app)</span><ul>
      <li>Plugins section:
        <section><pre><code class="language-kotlin">alias(libs.plugins.kotlin.serialization)</code></pre>
        </section>
      </li>
      <li>Dependencies section:
        <section><pre><code class="language-kotlin">implementation(libs.androidx.navigation)
implementation(libs.kotlinx.serialization.json)</code></pre>
        </section>
      </li>
    </ul></li>
  </ul>
   <br> <section class="marco-t warn">
    <span class="icono warning"> </span> Remember push <span class="negrita">sync now</span> to apply changes
    </section>
   <section class="marco-b">      
   </section>
   </p>


<p>Navigation in Jetpack Compose requires two elements:
  <ul>
    <li><span class="r-word">NavController</span>: it controls the navigation.</li>
    <li><span class="r-word">NavHost</span>: it displays each of the screens to which navigation occurs.</li>
  </ul>
</p>

<p>The element <span class="r-word">NavHost</span> defines the different screens to which you can navigate
   and also needs the <span class="r-word">NavController</span>.</p>

   <p>The first step is to create a package named <span class="negrita">navigation</span>, and inside it, create a file called <span class="inline-file">Screens.kt</span>
    which will contain a <span class="negrita">reference to each screen of the application</span> in order to keep them <span class="negrita">centralized</span>.</p>
 
 <section>
   <pre><code class="language-kotlin">
 // If the screen DOES NOT need to receive values, it is defined with: object
 @Serializable
 object First
 
 // If the screen NEEDS to receive values, it is defined with: data class
 @Serializable
 data class Second(
     // mandatory parameter
     val name: String,
     // optional parameter
     val age: Int = 0
 )
 </code></pre>
 </section>
 
 <br><br>
 
 <p>If the screen does <span class="negrita">not need</span> to receive values, define the route with: <span class="r-word">object</span></p>
 <p>If the screen <span class="negrita">needs</span> to receive values, define the route with: <span class="r-word">data class</span></p>
 <p><span class="negrita">Optional parameters</span> are indicated by assigning them a <span class="negrita">default value</span>.</p>
 

   
<p>Next, within the navigation folder, create a file that contains a 
<span class="r-word">@Composable</span> component named <span class="inline-file">Navigation.kt</span>. 
In this file, you define the <span class="negrita">NavController</span> and the <span class="negrita">NavHost</span>.</p>

<section><pre><code class="language-kotlin">@Composable
fun Navigation() {
    // Constant to manage the state, must be propagated across all screens
    val navController = rememberNavController()

    // Element that knows the different screens and which is the first to launch
    NavHost(
        navController = navController,
        startDestination = First // Route where the application starts
    ) {
        // Definition of the first screen
        composable&lt;First&gt; {
            FirstScreen(navController)
        }

        // Definition of the second screen
        composable&lt;Second&gt; { 
            // Parameters are obtained from the route to use them when loading the screen
            val args = it.toRoute&lt;Second&gt;()
            SecondScreen(navController, args.name, args.age)
        }
    }
}
</code></pre>
</section><br><br>

<p>In the example, two screens have been defined:
  <ul>
    <li>The first will load the <span class="d-word">FirstScreen</span> component that will receive the <span class="r-word">NavController</span> object.</li>
    <li>The second will load the <span class="d-word">SecondScreen</span> component that will receive the <span class="r-word">NavController</span> object and also a <span class="r-word">String</span> argument. 
      This argument must be specified when you want to navigate to this screen.</li>    
  </ul>
</p>
<p>The <span class="r-word">NavController</span> object must be passed to all components in which interacting with them will cause a screen change (navigation).</p>

<p>Since there will now be several screens and all will be managed by the <span class="r-word">Navigation</span> component, 
  in the <span class="inline-file">MainActivity</span> file, it must be indicated that this component is loaded.</p>

<section><pre><code class="language-kotlin">class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            NavigationTestsTheme {
                Navigation()
            }
        }
    }
}</code></pre>
</section><br><br>

<p>With all this, the navigation system is created; the only thing left is to create the content for the app's screens.</p>

<a href="UD8/images/ud_8-2025-01-20-10-06-29.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-06-29.png" /><br><figcaption></figcaption></figure></a>
<br>

<p>Inside the <span class="inline-folder">screens</span> folder, create a new package called <span class="inline-folder">layout</span> 
  and inside it, create a new Kotlin file called <span class="inline-file">AppScaffold.kt</span>.</p>

<p>This file will contain the structure for all the app's screens.</p>

<p>This component receives: <ul>
  <li>The title to display in the <span class="negrita">TopBar</span>.</li>
  <li>The <span class="negrita">NavController</span> to allow navigation from the <span class="negrita">TopBar</span>.</li>
  <li>A lambda function for the content of the <span class="r-word">Scaffold</span>, 
    which returns the <span class="r-word">paddingValues</span> parameter that should always be assigned to the first component of a <span class="negrita">Scaffold</span>.</li>
</ul></p>

<a href="UD8/images/ud_8-2025-01-20-10-09-02.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-09-02.png" /><br><figcaption></figcaption></figure></a>
<br>

<p>As seen in <span class="inline-file">AppScaffold</span>, using <span class="r-word">navController.popStackBack</span> 
it is indicated that we should go to the previous screen in the screen stack.</p>

<a href="UD8/images/ud_8-2025-01-20-10-10-37.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-10-37.png" /><br><figcaption></figcaption></figure></a>
<br>

<p>The <span class="r-word">navController.navigateUp</span> instruction performs the same action.</p>

<a href="UD8/images/ud_8-2025-01-20-10-10-52.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-10-52.png" /><br><figcaption></figcaption></figure></a>
<br>

<p><span class="negrita"><span class="cursiva">FirstScreen</span></span></p>

<section><pre><code class="language-kotlin">@Composable
fun FirstScreen(navController: NavController) {
    AppScaffold(
        title = "First Screen",
        navController = navController
    ) { paddingValues ->
        Column(
            modifier = Modifier.fillMaxSize().padding(paddingValues),
            verticalArrangement = Arrangement.Center,
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(text = "App for navigation")
            Spacer(modifier = Modifier.height(20.dp))
            var nameState by rememberSaveable { mutableStateOf("")}
            TextField(
                value = nameState,
                onValueChange = { nameState = it },
                placeholder = { Text(text = "Type your name") }
            )
            Spacer(modifier = Modifier.height(20.dp))
            var ageState by rememberSaveable { mutableStateOf("")}
            TextField(
                value = ageState,
                onValueChange = { ageState = it },
                placeholder = { Text(text = "Type your age") }
            )
            Spacer(modifier = Modifier.height(20.dp))
            Button(
                onClick = {
                    navController.navigate(
                        Second(
                            name = nameState,
                            age = ageState.toIntOrNull() ?: 0
                        )
                    )
                }
            ) {
                Text(text = "Move next window")
            }
        }
    }
}</code></pre>
</section><br><br>

<p>Using <span class="r-word">navController.navigate</span>, it is indicated that we should go to the Second screen, passing the necessary parameters.</p>

<a href="UD8/images/ud_8-2025-01-20-10-15-55.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-15-55.png" /><br><figcaption></figcaption></figure></a>
<br>

<p>Since <span class="negrita">ageState</span> is a state variable that stores an integer value, it tries to convert it to <span class="negrita">Int</span>, and 
   if the conversion fails, it will use the value <span class="negrita">0</span>.</p>

<p><span class="negrita"><span class="cursiva">SecondScreen</span></span></p>

<section><pre><code class="language-kotlin">@Composable
fun SecondScreen(navController: NavController, name: String, age: Int = 0) {
    AppScaffold(
        title = "Second Screen",
        navController = navController
    ) { paddingValues ->
        Column(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            verticalArrangement = Arrangement.Center,
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(text = "I've navigated")
            Text(text = "Data entered:")
            //Text(text = "Name: ${if (name.isNotEmpty()) name else "No input"}")
            Text(text = "Name: ${name.ifEmpty { "No input" }}")
            Text(text = "Age: ${if (age != 0) age else "No input"}")

            Button(onClick = {
//                navController.popBackStack()

                // Goes to the indicated one (if it is the previous one it will be a new instance: empty fields)
                // Also, cleans the stack
                navController.navigate(First) {
                    popUpTo&lt;First> {
                        inclusive = true
                    }
                }

//                navController.navigateUp()
            }) {
                Text(text = "Go back")
            }
        }
    }
}</code></pre>
</section><br><br>

<p>Since the <span class="d-word">age</span> parameter has been defined as optional in the route, 
    in the screen component, a default value must be assigned in case the screen is navigated to without that parameter being specified.</p>
  
    <a href="UD8/images/ud_8-2025-01-20-10-19-31.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-19-31.png" /><br><figcaption></figcaption></figure></a>
    <br>
    
<p>In Android, when navigating between screens, 
  they are accumulated in the screen stack, which is why the <span class="r-word">popBackStack</span> function is used to return to the previous screen.</p>

<p>If you navigate directly to First, that screen would be added again to the stack.</p>

<p>If you want to navigate to a specific screen, indicating that intermediate screens should be removed, you should do it as follows:</p>
  
<a href="UD8/images/ud_8-2025-01-20-10-21-10.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-21-10.png" /><br><figcaption></figcaption></figure></a>
<br>
  
<p>The <span class="r-word">inclusive</span> parameter indicates that the screen you navigate to should be removed so that it doesn't remain duplicated.</p>

  
    



<h3>BackHandler</h3>

<p>Android devices generally have a button that takes you back to the previous screen. Additionally, apps sometimes show
  a back arrow in the top bar to do the same thing.</p>
<figure><img src="UD8/images/ud8-2023-11-21-14-15-38.png" /><br><figcaption></figcaption></figure>
<br>

<p>These buttons always execute <span class="negrita">navController.popBackStack()</span>.</p>
<figure><img src="UD8/images/ud8-2023-11-21-14-19-54.png" /><br><figcaption></figcaption></figure>
<br>

<p>This action always returns to the previous screen, whether itâs from your app or from somewhere else; in fact, if
  you just opened one operation from the home screen, pressing the back arrow would bring you back to the home
  screen.</p>

<p>You can change this behavior by using the <span class="negrita">BackHandler</span> component.</p>
<p>If you set the property <span class="negrita">enabled = true</span>, the back buttons will remain disabled all the
  time.</p>

<figure><img src="UD8/images/ud8-2023-11-21-14-23-35.png" /><br><figcaption></figcaption></figure>
<br>
<p>Itâs not advisable to keep <span class="r-word">enabled</span> always as true, because in that case youâd never be
  able to exit the application.</p>

<p>Typically, youâll link <span class="r-word">enabled</span> to a state variable:</p>

<figure><img src="UD8/images/ud8-2023-11-21-14-24-32.png" /><br><figcaption></figcaption></figure>
<br>

<div class="tarea">
  <p>Activity 1:</p>
  <p>Study of the example Navigation application.</p>
</div>

<p><a class="enlace" target="_blank" href="https://github.com/sdram58/ExamplesPMDM225/tree/main/UD8/NavigationTests">Here</a> you have the link to github with the complete example </p>

</section><!-- End section NavegaciÃ³n-->



  <!--*********************************************************DiseÃ±os adaptativos***********************************************************-->
<section class="apartado">
  <a name="sDisenosAdaptativos"></a>
  <h2>Adaptive Layouts</h2>
  
  <p>Mobile devices come in different screen sizes and resolutions.</p>
  <p>If we know the screen size and orientation, we can decide which components to display on the screen.</p>
  <p>For example, master-detail applications might show certain components or others depending on the width.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-14-47-20.png" /><br><figcaption></figcaption></figure>
  <br>

  <p>There are several ways to determine the screen size and orientation.</p>

  <h3>Window size classes</h3>
  <p>The <span class="negrita">Window Size Classes</span> are 
    <a class="enlace" target="_blank" href="https://developer.android.com/develop/ui/compose/layouts/adaptive/support-different-display-sizes?hl=es-419">categorized in the Jetpack Compose documentation</a>
     and it explains <a class="enlace" target="_blank" href="https://developer.android.com/develop/ui/compose/layouts/adaptive/use-window-size-classes">how the elements should be organized</a>.</p>
  
  <a href="UD8/images/ud_8-2025-01-20-10-56-18.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-10-56-18.png" /><br><figcaption></figcaption></figure></a>
  <br>
  
  <p>For example, the Pixel 6a with API 35 gets the following values:
    <ul>
      <li><span class="negrita">Vertical</span>:	 width &rarr; Compact		and	height  &rarr; Expanded</li>
      <li><span class="negrita">Horizontal</span>:	 width &rarr; Expanded	and	height  &rarr; Compact</li>
    </ul>
  </p>
  
  <p>To know the <span class="negrita">Window size classes</span>, the following dependency must be added:
  <ul>
    <li>
      File <span class="inline-file">libs.versions.toml</span> <ul>
        <li>
          <span class="cursiva">[version]</span> Section
          <section><pre><code class="language-kotlin">adaptiveAndroid = "1.0.0"</code></pre>
          </section>
        </li>
        <li>
          <span class="cursiva">[libraries]</span> Section
          <section><pre><code class="language-kotlin">androidx-adaptive-android = { group = "androidx.compose.material3.adaptive", name = "adaptive-android", version.ref = "adaptiveAndroid" }</code></pre>
          </section>
        </li>
      </ul>
    </li>
    <li>
      <span class="inline-file">build.graddle.kts (Module: app) </span> file. Dependencies Section: 
      <section><pre><code class="language-kotlin">implementation(libs.androidx.adaptive.android)</code></pre>
      </section>
    </li>
  </ul></p>
  <p>Remember to press <span class="negrita">Sync Now</span> after adding the dependency.</p>
  
  <p>Once the above dependency is added, the following instructions can be used to get the device's window size classes:</p>
  
  <a href="UD8/images/ud_8-2025-01-20-11-08-18.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-08-18.png" /><br><figcaption></figcaption></figure></a>
  <br>
  <p>These instructions will return one of the following values:</p>
  <p>
    <pre>
      Window<span class="negrita">Width</span>SizeClass.COMPACT 		Window<span class="negrita">Height</span>SizeClass.COMPACT
      Window<span class="negrita">Width</span>SizeClass.MEDIUM			Window<span class="negrita">Height</span>SizeClass.MEDIUM
      Window<span class="negrita">Width</span>SizeClass.EXPANDED		Window<span class="negrita">Height</span>SizeClass.EXPANDED
    </pre>
  </p>
  <h3>LocalConfiguration class</h3>
  
  <p>The screen dimensions and orientation can also be obtained using the <span class="r-word">LocalConfiguration</span> class.
  <ul>
  <li>Dimensions in Dp:
    <a href="UD8/images/ud_8-2025-01-20-11-12-29.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-12-29.png" /><br><figcaption></figcaption></figure></a>
    <br>
    <a href="UD8/images/ud_8-2025-01-20-11-12-59.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-12-59.png" /><br><figcaption></figcaption></figure></a>
    <br>
    
  </li>
  <li>Screen orientation:
    <a href="UD8/images/ud_8-2025-01-20-11-12-20.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-12-20.png" /><br><figcaption></figcaption></figure></a>
    <br>
    
  </li>
  </ul></p>
  
  <h3>BoxWithConstraints Component</h3>
  <p>Another option is to use the <span class="r-word">BoxWithConstraints</span> Layout component, which automatically injects the dimensions.</p>
  <a href="UD8/images/ud_8-2025-01-20-11-14-44.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-14-44.png" /><br><figcaption></figcaption></figure></a>
  <br>
  <a href="UD8/images/ud_8-2025-01-20-11-15-12.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-15-12.png" /><br><figcaption></figcaption></figure></a>
  <br>
  
  <p>If this method is used outside of a Scaffold, higher values are obtained, as it includes margins and the top and bottom status bars in the dimensions.</p>
  
  <p>Once the screen size/orientation is known, different components can be loaded accordingly.</p>
  
  <p>For example:</p>
  
  <a href="UD8/images/ud_8-2025-01-20-11-15-59.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-15-59.png" /><br><figcaption></figcaption></figure></a>
  <br>
  



  <div class="tarea">
    <p>Activity 2: <br>
    Modify the DragonBall practice app so that it has an adaptive design. That is, it displays as it is in landscape mode, 
    but in portrait mode it shows separate screens: one with the list and another with the detail.
    </p>
  </div>

</section><!-- End section DiseÃ±os adaptativos-->



  <!--*********************************************************SplashScreen***********************************************************-->
<section class="apartado">
  <a name="sSplashScreen"></a>
  <h2>SplashScreen</h2>
  
  <p>A <span class="negrita">Splash Screen</span> is a window that appears when an Activity of an application or a game is launched, 
    provided that the associated process of the application is not running.</p>
 
 <p>By default, <span class="negrita">the Splash Screen of an application consists of the application icon on a white/black background</span> 
    (depending on the activated mode).</p>
 
 <p>The Splash Screen is a good resource to <span class="negrita">avoid the blank screen</span> while the application opens and 
    <span class="negrita">loads necessary data</span> for the app.</p>
 
 <p>Android Studio offers a library that allows you to customize the default Splash Screen, but its configuration is quite complex.</p>
 
 <p>If the application needs to load a lot of data, the default Splash Screen might not last long enough.</p>
 
 <p>Thanks to Jetpack Compose and the Single Activity technique, a second Splash Screen can be created to load the data with it.</p>
 
 <p>In this unit, the two techniques will be studied:
   <ul>
     <li>Modify the default Splash Screen.</li>
     <li>Create a Splash Screen with Jetpack Compose.</li>
   </ul>
 </p>
 
 <p>A Splash Screen typically includes:
   <ul>
     <li>Image or logo.</li>
     <li>Application name.</li>
     <li>Application version.</li>
     <li>Developers' names.</li>
     <li>Engine used for development.</li>
   </ul>
 </p>
 
 <p>Additionally, animations are often used.</p>
 
 <a href="UD8/images/ud_8-2025-01-20-11-36-23.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-36-23.png" /><br><figcaption>Some SplashScreen samples</figcaption></figure></a>
 <br>
 
 <p>Starting from Android 12, the default Splash Screen is implemented as follows:</p>
 
 <p>Documentation:
   <ul>
     <li>
       <a class="enlace" target="_blank" href="https://developer.android.com/develop/ui/views/launch/splash-screen">English</a>
     </li>
     <li>
       <a class="enlace" target="_blank" href="https://developer.android.com/develop/ui/views/launch/splash-screen?hl=es-419">Spanish</a>
     </li>
   </ul>
 </p>
 
 <a href="UD8/images/ud_8-2025-01-20-11-40-32.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-40-32.png" /><br><figcaption></figcaption></figure></a>
 <br>
 
 <p>The process of showing the Splash Screen consists of the following sequence:
   <ul>
     <li><span class="negrita">Entry animation</span>: the Splash Screen is shown. <span class="negrita">Android controls this animation and it cannot be customized</span>.</li>
     <li><span class="negrita">Splash Screen</span>: the <span class="negrita">content of the Splash Screen is displayed</span>, automatically animating the image if it is an animated vector image (xml) and the Android version is 12 or higher.</li>
     <li><span class="negrita">Exit animation</span>: the way the Splash Screen disappears. 
       By default, it is controlled by the system, but it can be customized. <span class="negrita">If customized, it is mandatory to manually remove the Splash Screen</span> 
       when the animation finishes. The image and/or the Splash Screen itself can be animated in this step.</li>
   </ul>
 </p>
 <a href="UD8/images/ud_8-2025-01-20-11-43-25.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-11-43-25.png" /><br><figcaption>SplashScreen sequence</figcaption></figure></a>
 <br>
 
 <p>To customize the default Splash Screen, the following dependency must be added:
   <ul>
     <li>
       File <span class="inline-file">libs.versions.toml</span> <ul>
         <li><span class="cursiva">[version]</span> section
         <section><pre><code class="language-kotlin">coreSplashscreen = "1.0.1"</code></pre>
         </section></li>
       <li><span class="cursiva">[libraries]</span> section
       <section><pre><code class="language-kotlin">androidx-core-splashscreen = {group = "androidx.core", name = "core-splashscreen", version.ref = "coreSplashscreen"}</code></pre>
       </section></li>
       </ul>
     </li>
     <li>
       <span class="inline-file">build.graddle.kts (Module: app)</span> file. Dependencies section:
       <section><pre><code class="language-kotlin">implementation(libs.androidx.core.splashscreen)</code></pre>
       </section>
     </li>
   </ul>
 </p>
 
 <p>Remember to press <span class="negrita">Sync Now</span> after adding the dependency.</p>

 <section class="marco-t inf">
  <span class="icono info"> </span> In newer versions we don't need to add dependencies. They're already added by default
  </section>
 <section class="marco-b">
    
 </section>
  
 
 <p>If you want to use an image, it should be added to the project in the <span class="inline-folder">resources</span> folder:</p>
 
 <a href="UD8/images/ud_8-2025-01-20-12-23-04.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-12-23-04.png" /><br><figcaption></figcaption></figure></a>
 <br>
 
 <p>It is preferable to use vector graphics, but bitmap images (png or jpg) converted to webp can also be used.</p>
 
 <p>The image dimensions should meet the following:
   <ul>
     <li><span class="negrita">Without transparency</span>: 240x240 (a 160 radius circle is displayed)</li>
     <li><span class="negrita">With transparency</span>: 288x288 (a 192 radius circle is displayed)</li>
   </ul>
 </p>
 
 <p>If it is a vector graphic, the dimension will be in dp, if it is a bitmap image, the dimension will be in px.</p>
 
 <p>The next step is to create the style for the Splash Screen, for which a resource file <span class="inline-file">res/values/splash.xml</span> should be created:</p>
 
 <a href="UD8/images/ud_8-2025-01-20-12-26-08.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-12-26-08.png" /><br><figcaption></figcaption></figure></a>
 <br>
 
 <p>with the following code:</p>
 <section><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
 &lt;resources&gt;
     &lt;style name="Theme.MySplashScreen" parent="Theme.SplashScreen"&gt;
         &lt;item name="windowSplashScreenBackground"&gt;#FF9800&lt;/item&gt;
         &lt;item name="windowSplashScreenAnimatedIcon"&gt;@drawable/fourstarball&lt;/item&gt;
     &lt;/style&gt;
 &lt;/resources&gt;
 </code></pre>
 </section><br><br>
 
 <a href="UD8/images/ud_8-2025-01-20-12-29-59.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-12-29-59.png" /><br><figcaption></figcaption></figure></a>
 <br>
 <section class="marco-t inf">
  <span class="icono info"> </span> In newer versions postSplashScreenTheme is not necessary
  </section>
 <section class="marco-b">
    
 </section>
  
 <p>The theme to load after finishing is the one already existing in <span class="inline-file">res/values/themes.xml</span>.</p>
 
 <p>In the manifest file, it should be indicated that the Activity will use the Splash Screen defined in the new theme:</p>
 
 <a href="UD8/images/ud_8-2025-01-20-12-30-45.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-12-30-45.png" /><br><figcaption></figcaption></figure></a>
 <br>
 
 <p>Finally, it should be indicated in the Kotlin file <span class="inline-file">MainActivity.kt</span> of the activity that the Splash Screen will be used:</p>
 
 <a href="UD8/images/ud_8-2025-01-20-12-32-04.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-12-32-04.png" /><br><figcaption></figcaption></figure></a>
 <br>
 
 <p>If, after the Splash Screen finishes, the screen stays blank until the main screen of the app appears, 
   the following code should be added to the previous line:</p>
 
 <a href="UD8/images/ud_8-2025-01-20-12-32-45.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-12-32-45.png" /><br><figcaption></figcaption></figure></a>
 <br>
 
 <p>With the steps above, the Splash Screen will work correctly on all devices.</p>
 
 <p>Starting from Android 12 (API 31), new features are introduced for the Splash Screen:
   <ul>
     <li>Animated images (only vector graphics in xml format)</li>
     <li>Display a secondary image (branding image) at the bottom.</li>
     <li>Splash Screen exit animation.</li>
   </ul>
 </p>

 <section class="marco-t inf">
  <span class="icono info"> </span> In newer versions, <span class="negrita">installSplashScreen()</span> function is not needed. You shouldn't put it in. It's in the Android core and does it on its own.
  </section>
 <section class="marco-b">
    
 </section>
  
 
 <p>In the <a class="enlace" target="_blank" href="https://developer.android.com/develop/ui/views/launch/splash-screen?hl=es-419#launch">documentation</a> 
   you can find all the information and examples for these features.</p>
 
 <h3>SplashScreen with Jetpack Compose</h3>
 
 <p>With Jetpack Compose navigation, implementing a Splash Screen is very simple.
   <ol>
     <li>Create a route for the Splash Screen in Routes.kt.</li>
     <li>Add the Splash Screen route to the Navigation.kt file.</li>
     <li>Indicate in the NavHost (Navigation.kt) that the Splash Screen is the "startDestination".</li>
     <li>Create a @Composable component with the Splash Screen content.</li>
     <li>Indicate in the @Composable of the Splash Screen that after it finishes loading, it should navigate to the next screen.</li>
   </ol>
 </p>
 
 <p>The <span class="r-word">LaunchedEffect</span> is used (it will be studied later) to run that code in the background (coroutine).</p>
 
 <section><pre><code class="language-kotlin">@Composable
 fun SplashScreen(navController: NavHostController) {
     LaunchedEffect(key1 = true) { // this: CoroutineScope
         delay(timeMillis = 5000) //Change this for real instructions, getting data from API, BDD, etc
         navController.popBackStack() // Prevent going back to the Splash Screen
         navController.navigate(Routes.MainScreen.route)
     }
 
     Splash()
 }
 
 @Composable
 fun Splash() {
     Column(
         modifier = Modifier.fillMaxSize(),
         horizontalAlignment = Alignment.CenterHorizontally,
         verticalArrangement = Arrangement.Center
     ) { // this: ColumnScope
         Image(
             painter = painterResource(id = R.drawable.logo),
             contentDescription = "logo",
             modifier = Modifier.size(200.dp, 200.dp)
         )
         Text(
             text = "Welcomed",
             fontSize = 30.sp,
             fontWeight = FontWeight.Bold
         )
     }
 }
 </code></pre>
 </section><br><br>
 <p>In a real application, instead of the delay(5000) instruction, the code that retrieves the information needed by the application should be written, 
   for example, from a database or an API.</p>
 
 <p>Very attractive Splash Screens can be designed using the animations that will be covered at the end of this unit.</p>
 
 <p>By adding a Splash Screen with Jetpack Compose, the application opening flow will be as follows:
   <ol>
     <li>Default Splash Screen (with the application icon).</li>
     <li>Jetpack Compose Splash Screen.</li>
     <li>Main screen.</li>
   </ol>
 </p>
 
 <p>Using this technique, you take advantage of the design ease that Jetpack Compose offers.</p>
 
 <p>Additionally, the Jetpack Compose Splash Screen can be started to initially display the app icon in the center, providing continuity between the two Splash Screens.</p>
 
 <p><a class="enlace" target="_blank" href="https://github.com/sdram58/ExamplesPMDM225/tree/main/UD8/SplashScreen">Here</a>, there is an example of a combined SplashScreen</p>
 

  <div class="tarea">
    <p>Modify the DragonBall application to include a <span class="cursiva">SplashScreen</span>. This will display the dragon ball from the app and the text "DragonBall" for 3 seconds.</p>
  </div>

  <p class="oculto">Here is the <a class="enlace" target="_blank" href="https://github.com/sdram58/EjemplosPMDM2324/tree/master/UD5/dragonball_navigation">Github link</a> with the Dragon Ball app updated for Navigation, adapted to <span class="cursiva">Portrait</span> and <span class="cursiva">Landscape</span>, and with a <span class="cursiva">Splash Screen</span>.</p>

</section><!-- End section SplashScreen-->

<!--*********************************************************Onboarding***********************************************************-->
<section class="apartado">
  <a name="sOnboarding"></a>
  <h2>Onboarding</h2>
  
  <p><span class="negrita">Onboarding</span> refers to a set of screens displayed in the app as an introduction to how it works.</p>
  <p>Via <span class="cursiva">Onboarding</span>, you can quickly explain to the user how the app works.</p>
  <p>You can also request data from the user, for example, in <span class="cursiva">Telegram/WhatsApp</span>, the <span class="cursiva">Onboarding</span> requests the phone number, the confirmation code, and the username.</p>
  <p>There are many techniques for <span class="cursiva">Onboarding</span>. In some cases itâs mandatory to go through all steps, in others you can skip them and go directly into the main application.</p>
  <p>The <span class="cursiva">Onboarding</span> should only be shown the first time you run the app after installing it.</p>
  <p>If, in <span class="cursiva">Onboarding</span>, mandatory data is requested for the app to function, the Onboarding will continue to be displayed until that data is obtained.</p>
  <p>In apps where you can log out, the <span class="cursiva">Onboarding</span> will be displayed each time the current user logs out.</p>
  <p>You can find numerous online resources and best practices on designing a good Onboarding process.</p>
  <p>Below are a couple of examples:</p>
  <figure><img src="UD8/images/ud8-2023-11-21-19-11-40.png" /><br><figcaption></figcaption></figure>
  <br>

  <figure><img src="UD8/images/ud8-2023-11-21-19-11-54.png" /><br><figcaption></figcaption></figure>
  <br>

  <p>Creating Onboarding with Jetpack Compose and Navigation is quite simple using navigation. You can choose one of these approaches:
    <ul>
      <li>Create as many Screens as there are onboarding pages and control navigation among them.</li>
      <li>Create a single screen with a HorizontalPager (if mandatory data is collected, you must control navigation between pages with buttons).</li>
    </ul>
  </p>

  <p>When Onboarding is finished, you must navigate to a screen that already shows the appâs functionality.</p>

  <p>To show the Onboarding only the first time you launch the app (or whenever itâs neededâfor example, if the user logs out), you must store that information somehow.</p>
  <p>In <span class="cursiva">UD10 Persistence</span>, youâll learn how to save app preferences, allowing you to store this data.</p>

</section><!-- End section Onboarding-->


  <!--*********************************************************Temas***********************************************************-->
<section class="apartado">
  <a name="sTemas"></a>
  <h2>Themes</h2>

  <p>In the previous unit, we studied how to centralize values and thus how to create a color palette within the <span class="negrita">res -> values -> colors.xml</span> file that can be used to build a theme for the entire application.</p>

<p>Although that file is fully functional, it <span class="subrayado">does not follow the foundations of Material Design and should be avoided</span>.</p>

<p>Within the same folder is the file <span class="inline-file">themes.xml</span>, which specifies the base theme on which the <span class="negrita">Jetpack Compose</span> theme is built.</p>

<figure><img src="UD8/images/ud8-2023-11-21-19-31-22.png" /><br><figcaption></figcaption></figure>
<br>

<p>When creating a project in Android Studio, by default it creates its own <span class="negrita">Jetpack Compose theme</span> based on Material Design, which you can customize.</p>
<p>The files for this theme can be found in the <span class="negrita">ui --> theme</span> folder.</p>

<p>From now on, to configure the applicationâs theme, we will use these files.</p>
<figure><img src="UD8/images/ud8-2023-11-21-19-33-14.png" /><br><figcaption></figcaption></figure>
<br>

<p>The theme is defined in the file <span class="inline-file">Theme.kt</span>. Its content is as follows:</p>
<figure><img src="UD8/images/ud8-2023-11-21-19-34-56.png" /><br><figcaption></figcaption></figure>
<br>

<p>The <span class="negrita">Theme.kt</span> is divided into three subsystems:
  <ul>
    <li><span class="negrita">Color.kt</span>: color palette</li>
    <li><span class="negrita">Type.kt</span>: text typography</li>
    <li><span class="negrita">Shape.kt</span>: shapes (this file is not created by default)</li>
  </ul>
</p>
<figure><img src="UD8/images/ud8-2023-11-21-19-38-46.png" /><br><figcaption></figcaption></figure>
<br>

<p>Whenever you make any changes to any of these three files, you will see them immediately in the Jetpack Compose application components that implement Material3.</p>

<h3>Color Palette</h3>

<p>This palette consists of <span class="negrita">6 key colors</span>. The following image shows the 5 key colors of the default Material 3 theme plus an additional key color for errors.</p>
<figure><img src="UD8/images/ud8-2023-11-21-21-07-34.png" /><br><figcaption>Color palette</figcaption></figure>
<br>

<p>Each color must be defined in 13 different tones, from 0 (black) to 100 (white).</p>
<figure><img src="UD8/images/ud8-2023-11-21-21-07-57.png" /><br><figcaption></figcaption></figure>
<br>

<p>For each of the 6 key colors, you must <span class="negrita">choose 4 color shades</span>, which are the ones that will be <span class="negrita">specified in the app theme</span>.</p>
<figure><img src="UD8/images/ud8-2023-11-21-21-08-59.png" /><br><figcaption></figcaption></figure>
<br>

<p>The roles for the Primary, Secondary, and Tertiary colors are:
  <ul>
    <li><span class="negrita">Primary</span>: The base color used for main components, such as prominent buttons, active states, and elevated surface tone.</li>
    <li><span class="negrita">Secondary</span>: Used for less prominent UI components, such as filter chips.</li>
    <li><span class="negrita">Tertiary</span>: Used to provide contrasts. You can find more information on when to use each key color in the official Material documentation:
      <a class="enlace" target="_blank" href="https://m3.material.io/styles/color/roles#19e75989-7485-4f5b-a769-940c4e4364bc">Color roles</a></li>
  </ul>
</p>
<figure><img src="UD8/images/ud8-2023-11-21-21-10-44.png" /><br><figcaption>Color roles</figcaption></figure>
<br>

<p>Meaning of the shade names:</p>

<a href="UD8/images/ud_8-2025-01-20-17-16-45.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-17-16-45.png" /><br><figcaption></figcaption></figure></a>
<br>
<p>More information on when to use each key color can be found in the official Material documentation:
  <a class="enlace" target="_blank" href="https://m3.material.io/styles/color/roles#19e75989-7485-4f5b-a769-940c4e4364bc">Color roles</a>.</p>

<p class="sub-section">Using the Material Theme Colors</p>
<p>To use the Material-defined colors, whether itâs the default theme or a customized palette, you must use the class <span class="negrita">MaterialTheme</span>.</p>
<figure><img src="UD8/images/ud8-2023-11-21-23-00-29.png" /><br><figcaption></figcaption></figure>
<br>

<p class="sub-section">Modifying the Color Palette</p>

<p>Choosing a color palette is critical in an application, requiring thorough study.</p>
<p>If you have enough design knowledge, you can manually create the palette.</p>
<p>If not, you can use the tool offered by Material3: <a class="enlace" target="_blank" href="https://m3.material.io/theme-builder#/custom">https://m3.material.io/theme-builder#/custom</a></p>
<p>In this tool, you select the key colors you want, and it automatically generates the required shades and shows you how they will look in the application.</p>

<a href="UD8/images/ud_8-2025-01-20-17-19-14.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-17-19-14.png" /><br><figcaption></figcaption></figure></a>
<br>

<a href="UD8/images/ud_8-2025-01-20-17-19-54.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-17-19-54.png" /><br><figcaption></figcaption></figure></a>
<br>

<p>When exporting the theme created in the web application, a compressed file material-theme.zip is obtained with the following files:

  <a href="UD8/images/ud_8-2025-01-20-17-40-09.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-17-40-09.png" /><br><figcaption></figcaption></figure></a>
  <br>

  <ul>
    <li><span class="negrita">Color.kt</span>:
    <br>
    This should be replaced with the one from the project by indicating the correct package.</li>
    <li><span class="negrita">Theme.kt</span>: <br>
      This should be replaced with the one from the project by indicating the correct package, and at the end of the file, the correct project <span class="negrita">Theme</span> name must be indicated.</li>
    <li><span class="negrita">Type.kt</span>: <br>
      This should be replaced with the one from the project by indicating the correct package.
      If fonts were selected, the content of the <span class="inline-folder">res</span> folder from the <span class="negrita">zip</span> must be copied to the <span class="inline-folder">res</span> folder of the project in Android Studio and the dependencies should be imported.
    </li>
  </ul>
</p>

  



  <p>Once you have decided on the color palette, you must place it in the app within the file <span class="inline-file">Color.kt</span>.</p>
  <p>By default, this file has some color definitions as examples.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-08-47.png" /><br><figcaption>Colores.kt</figcaption></figure>
  <br>

  <p>The best approach is to define all palette colors for both light and dark modes in the manner in which you will later use them in the applicationâs theme.</p>

  <p>Below are all the required variables to modify the entire default Material 3 color palette.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-10-35.png" /><br><figcaption></figcaption></figure>
  <br>
  <p>You get the same code using the <a class="enlace" target="_blank" href="https://m3.material.io/theme-builder#/custom">Material 3 palette generation tool</a>.</p>

  <p>Once you have added the entire palette, you must specify that palette in the applicationâs theme color subsystem in the file <span class="inline-file">Theme.kt</span>.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-12-39.png" /><br><figcaption>Theme.kt</figcaption></figure>
  <br>

  <h3>Dynamic Color</h3>
  <p>A very important feature in Material 3 is <span class="d-word">Dynamic Color</span>, an algorithm that generates derived colors from the deviceâs wallpaper.</p>

  <p>By default, Android Studio projects with Jetpack Compose enable Dynamic Color if the deviceâs Android version supports it. You can see this in the <span class="inline-file">Theme.kt</span> file:</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-16-13.png" /><br><figcaption></figcaption></figure>
  <br>

  <p>If you want to disable it, just remove those lines of code that enable it.</p>

  <h3>Typography</h3>
  <p>Material 3 defines five different typography roles, each with three sizes:</p>
  
  <a href="UD8/images/ud_8-2025-01-20-17-41-33.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-17-41-33.png" /><br><figcaption></figcaption></figure></a>
  <br>
  

  <p>Each of the <a class="enlace" target="_blank" href="https://m3.material.io/styles/typography/applying-type#fea95f28-348c-42ae-95e1-1c5bfd819524">five roles has a specific function</a>.</p>

  <p>For each role, three different sizes are defined:</p>
  <a href="UD8/images/ud_8-2025-01-20-17-42-15.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-17-42-15.png" /><br><figcaption></figcaption></figure></a>
  <br>
  

  <p>You can consult <a class="enlace" target="_blank" href="https://m3.material.io/styles/typography/type-scale-tokens#a734c6ed-634c-4abb-adb2-35daf0aed06a">the detailed features of each role</a>.</p>

  <p class="sub-section">Using Material Theme Typography</p>
  <p>Just like with colors, to use the typographies, you must use the <span class="r-word">MaterialTheme</span> class:</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-20-52.png" /><br><figcaption></figcaption></figure>
  <br>

  <p class="sub-section">Modifying Typography --> Type.kt</p>
  <p>To modify the typography of the Material 3 theme, add your own styles in the <span class="inline-file">Type.kt</span> file.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-23-35.png" /><br><figcaption></figcaption></figure>
  <br>

  <h3>Shapes</h3>
  <p>Material 3 defines a set of shapes that can be applied to components.</p>
  <p>With components like <span class="cursiva">Button</span>, <span class="cursiva">TextField</span>, <span class="cursiva">Card</span>, etc., you can see that a shape is applied around them.</p>
  <p>By default, the shape defined in the material theme is rounded, although you can customize the shapes.</p>

  <p class="sub-section">Using Material Theme Shapes</p>
  <p>Like with colors, to use shapes you must do so through the <span class="r-word">MaterialTheme</span> class:</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-26-41.png" /><br><figcaption></figcaption></figure>
  <br>

  <p>The shapes you can define can be rounded or angular and can be symmetrical or not.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-28-10.png" /><br><figcaption></figcaption></figure>
  <br>

  <p class="sub-section">Modifying Shapes --> Shape.kt</p>
  <p>By default, Android Studio does not create a file to customize shapes.</p>
  <p>You must manually create it inside the <span class="inline-folder">theme</span> folder and then add your custom shapes there.</p>
  <p>There are different constructors for <span class="negrita">RoundedCornerShape</span> and <span class="negrita">CutCornerShape</span>.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-29-56.png" /><br><figcaption></figcaption></figure>
  <br>

  <p>Then, you need to indicate in the <span class="inline-file">Theme.kt</span> file that youâve created the <span class="inline-file">Shape.kt</span> file so the application theme uses it.</p>
  <p>At this point, you can see that itâs loading all three subsystems (color, typography, and shapes) for the app theme.</p>
  <figure><img src="UD8/images/ud8-2023-11-21-23-32-22.png" /><br><figcaption>Theme.kt</figcaption></figure>
  <br>

  <h3>Inline Modifications of Theme Parameters</h3>
  <p>Sometimes you need to <span class="negrita">make variations</span> to the Material theme values 
    but <span class="negrita">without changing the theme values or adding new ones</span>.</p>
  <p>By using the <span class="r-word">copy</span> function, you make a âtemporary copyâ of a theme property, applying whatever adjustments you want to that property.</p>
  <p>Depending on the type of property (<span class="cursiva">colorScheme, typography, shapes</span>) you use the <span class="negrita">copy</span> function on, you can specify different parameters.</p>
  <section><pre><code class="language-kotlin">Text(
    text = "Hola Rick!",
    style = MaterialTheme.typography.bodyLarge.copy(
        shadow = Shadow(
            offset = Offset(5f,5f),
            blurRadius = 2f,
            color = Color(0xFFFF8000)
        )
    )
)</code></pre>
  </section><br>
  <figure><img src="UD8/images/ud8-2023-11-21-23-36-44.png" /><br><figcaption></figcaption></figure>
  <br>

  <h3>Status and Navigation Bars</h3>


  <p>The Android operating system offers two bars by default in apps:
    <ul>
      <li>The status bar (top).</li>
      <li>The navigation bar (bottom).</li>
    </ul>
  </p>
  <p>The style of these bars is configured based on the applicationâs theme colors, 
    but since these bars are provided by the operating system, you must follow a specific procedure if you want to style them independently of the theme.</p>
   <a href="UD8/images/ud_8-2025-01-20-18-20-57.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-18-20-57.png" /><br><figcaption></figcaption></figure></a>
   <br>

   <p>By default, Jetpack Compose configures the status bar (top) and the navigation bar (bottom) to be transparent.</p>

<p>This action is performed through the <span class="r-word">enableEdgeToEdge</span> function, which can be seen in the onCreate function of the <span class="d-word">MainActivity</span> file.</p>
<a href="UD8/images/ud_8-2025-01-20-18-23-05.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-18-23-05.png" /><br><figcaption></figcaption></figure></a>
<br>

<p>The <span class="r-word">enableEdgeToEdge</span> function has been introduced in the latest versions of Android Studio and 
   it will likely have modifications in the future to allow for more customization.</p>

<p>This function supports two parameters <span class="negrita">statusBarStyle</span> and <span class="negrita">navigationBarStyle</span>
   that allow changing the color of the bars and the style of the buttons.</p>

<p class="sub-section">Status Bar and Navigation Bar Colors</p>

<a href="UD8/images/ud_8-2025-01-20-18-23-45.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-18-23-45.png" /><br><figcaption></figcaption></figure></a>
<br>
<p>
  <ul>
    <li><span class="negrita">SystemBarStyle.light</span>: <ul>
      <li>Indicates that the color of the bar should be light to contrast with the icons, which will automatically be configured to a dark color.</li>
      <li>The first parameter is the color to apply to the bar.</li>
      <li>The second parameter should be a dark color in case the device does not have dark mode.</li>
    </ul>
    </li>
    <li><span class="negrita">SystemBarStyle.dark</span>: <ul>
      <li>Indicates that the color of the bar should be dark to contrast with the icons, which will automatically be configured to a dark color.</li>
      <li>The parameter is the color to apply to the bar.</li>
    </ul></li>
  </ul>

</p>

<p>The status bar, the navigation bar, or both can be hidden at once.</p>

<p>To do this, within the <span class="r-word">onCreate</span> function of the <span class="d-word">MainActivity</span> file, the following instructions can be added:</p>

<section><pre><code class="language-kotlin">// Controls the visibility of system bars
val windowInsetsController = WindowInsetsControllerCompat(window, window.decorView)

// Hides both the status bar and navigation bar at once
windowInsetsController.hide(WindowInsetsCompat.Type.systemBars())

// Hides the status bar (top)
windowInsetsController.hide(WindowInsetsCompat.Type.statusBars())

// Hides the navigation bar (bottom)
windowInsetsController.hide(WindowInsetsCompat.Type.navigationBars())
</code></pre>
</section><br><br>


  
</section><!-- End section Temas-->


  
  <!--*********************************************************Animaciones***********************************************************-->
  <section class="apartado">
  <a name="sAnimaciones"></a>
  <h2>Animations</h2>

  <p>
    Jetpack Compose provides a series of <a class="enlace" target="_blank" href="https://developer.android.com/jetpack/compose/animation?hl=es-419">APIs for creating animations</a> in the interface components.
  </p>

  <p>In the Jetpack Compose documentation you can see a 
    <a class="enlace" target="_blank" href="https://developer.android.com/develop/ui/compose/animation/choose-api?hl=es-419">
    diagram to know what type of animation is needed in each case</a>.</p>
  
  <a href="UD8/images/ud_8-2025-01-20-18-31-03.png" target="_BLANK"><figure><img src="UD8/images/ud_8-2025-01-20-18-31-03.png" /><br><figcaption></figcaption></figure></a>
   
  <br>

  <p>
    Below are a few examples of how to use these animation APIs. If more information is needed on how they workâfor instance, changing the animation type or durationâplease refer to the <a class="enlace" target="_blank" href="https://developer.android.com/jetpack/compose/animation?hl=es-419">documentation</a>.
  </p>

  <h3>animate*AsState</h3>
  <p>
    This API can create an animation between two values, with Android handling the animation from the initial value to the final value. The <span class="negrita">*</span> can be replaced by any of the following types:
  </p>
  <ul>
    <li>Int</li>
    <li>Float</li>
    <li>Color</li>
    <li>Dp</li>
    <li>Size</li>
    <li>Offset</li>
    <li>Rect</li>
    <li>IntOffset</li>
    <li>IntSize</li>
  </ul>

  <section>
    <pre><code class="language-kotlin">var animateColor by rememberSaveable {
    mutableStateOf(false)
}
val backgroundColor by animateColorAsState(
    if (animateColor) Color(0xFFFFA020) else Color(0xFF40C0FF)
)
Column(
    modifier = Modifier.fillMaxSize(),
    verticalArrangement = Arrangement.Center,
    horizontalAlignment = Alignment.CenterHorizontally
) {
    Button(onClick = { animateColor = !animateColor }) {
        Text(text = "Change Color")
    }
    Spacer(modifier = Modifier.height(10.dp))
    Text(
        text = "Hello Rick!",
        fontWeight = FontWeight.Bold,
        modifier = Modifier
            .background(backgroundColor)
            .padding(20.dp)
    )
}</code></pre>
  </section>
  <br>

  <figure>
    <img src="UD8/images/ud8-2023-11-22-00-24-39.png" /><br>
    <figcaption></figcaption>
  </figure>
  <br>

  <p>Changing opacity:</p>
  <section>
    <pre><code class="language-kotlin">var animateAlpha by rememberSaveable {
    mutableStateOf(true)
}
val alpha: Float by animateFloatAsState(
    if (animateAlpha) 1f else 0.3f
)
Column(
    modifier = Modifier.fillMaxSize(),
    verticalArrangement = Arrangement.Center,
    horizontalAlignment = Alignment.CenterHorizontally
) {
    Button(onClick = { animateAlpha = !animateAlpha }) {
        Text(text = "Change Opacity")
    }
    Spacer(modifier = Modifier.height(10.dp))
    Box(
        modifier = Modifier
            .graphicsLayer(alpha = alpha)
            .fillMaxWidth()
            .background(Color(0xFFFFA020))
    ) {
        Text(
            text = "Hello Rick!",
            fontWeight = FontWeight.Bold,
            modifier = Modifier.padding(20.dp)
        )
    }
}</code></pre>
  </section>
  <br>

  <figure>
    <img src="UD8/images/OpacityDemo.gif" /><br>
    <figcaption></figcaption>
  </figure>
  <br>

  <h3>AnimatedVisibility</h3>
  <p>
    Lets you hide and show components.
  </p>

  <section>
    <pre><code class="language-kotlin">var visible by rememberSaveable {
    mutableStateOf(false)
}

Column(
    modifier = Modifier.fillMaxSize(),
    verticalArrangement = Arrangement.Center,
    horizontalAlignment = Alignment.CenterHorizontally
) {
    Button(onClick = { visible = !visible }) {
        Text(text = if (visible) "Hide" else "Show")
    }
    Spacer(modifier = Modifier.height(10.dp))
    AnimatedVisibility(visible = visible) {
        Text(
            text = "Hello Rick!",
            fontWeight = FontWeight.Bold,
            modifier = Modifier
                .background(Color(0xFFFFA020))
                .padding(20.dp)
                .fillMaxWidth()
        )
    }
}</code></pre>
  </section>
  <br>

  <figure>
    <img src="UD8/images/VisibilityDemo.gif" /><br>
    <figcaption></figcaption>
  </figure>
  <br>

  <p>
    According to the documentation, the default entering animation is <span class="negrita">fade inâexpand</span> and the default exiting animation is <span class="negrita">fade outâshrink</span>.
  </p>

  <p>
    You can configure these animations via the <span class="r-word">enter</span> and <span class="r-word">exit</span> parameters. Some possible options include:
  </p>
  <ul>
    <li>fadeIn</li>
    <li>fadeOut</li>
    <li>slideIn</li>
    <li>slideOut</li>
    <li>slideInHorizontally</li>
    <li>slideOutHorizontally</li>
    <li>slideInVertically</li>
    <li>slideOutVertically</li>
    <li>scaleIn</li>
    <li>scaleOut</li>
    <li>expandIn</li>
    <li>shrinkOut</li>
    <li>expandHorizontally</li>
    <li>shrinkHorizontally</li>
    <li>expandVertically</li>
    <li>shrinkVertically</li>
  </ul>

  <p>
    <a class="enlace" target="_blank" href="https://developer.android.com/jetpack/compose/animation?hl=es-419#enter-exit-transition">See example animations</a>
  </p>

  <h3>AnimatedContent</h3>
  <p>
    Animates all the content of a component; by default, it is a fade-and-grow animation.
  </p>
  <section class="marco-t warn">
    <span class="icono warning"> </span> experimental, it may undergo changes or disappear in the future
  </section>
  <section class="marco-b">
    <p>Add this dependency in <span class="inline-file">build.gradle (Module:app)</span></p>
    <section><pre><code class="language-kotlin">implementation("androidx.compose.animation:animation-android:1.7.6")</code></pre>
    </section>
  </section>
  

  <section>
    <pre><code class="language-kotlin">
  var times by rememberSaveable {
      mutableStateOf(0)
  }
  Row {
      Button(onClick = { times++ }) {
          Text(text = "+1")
      }
      Spacer(modifier = Modifier.width(10.dp))
      Button(onClick = { times-- }) {
          Text(text = "-1")
      }
  
      AnimatedContent(targetState = times, label ="") {
          Text(
              text = "Count $it",
              modifier = Modifier.padding(10.dp)
          )
      }
  
      AnimatedContent(
          targetState = times,
          // Customizing the animation
          transitionSpec = {
              //targetState: new value of the state variable
              //initialState: previous value of the state variable
  
              if (targetState < initialState) {
                  (slideInVertically { height -> height } + fadeIn())
                      .togetherWith(slideOutVertically { height -> -height } + fadeOut())
              } else {
                  (slideInVertically { height -> -height } + fadeIn())
                      .togetherWith(slideOutVertically { height -> height } + fadeOut())
              }
          },
          label =""
      ) { targetCount ->
          Text(
              text = "$targetCount",
              modifier = Modifier.padding(10.dp)
          )
      }
  }
    </code></pre>
  </section>
  <br>
  <figure><img src="UD8/images/AnimatedContentDemo.gif" /><br><figcaption></figcaption></figure>
  <br>
  
  <h3>Crossfade</h3>
  
  <p>Turns one componentâs content into another, blending them during the transition.</p>
  
  <section>
    <pre><code class="language-kotlin">
  var visibleContent by rememberSaveable {
      mutableStateOf("Manga")
  }
  Crossfade(
      targetState = visibleContent,
      label = "",
      modifier = Modifier.clickable {
          visibleContent = if (visibleContent == "Manga") "Anime" else "Manga"
      }
  ) { screen ->
      when (screen) {
          "Manga" -> Text(text = "Manga")
          "Anime" -> Text(text = "Anime")
      }
  }
    </code></pre>
  </section>
  <br>
  <figure><img src="UD8/images/CrossFadeDemo1.gif" /><br><figcaption></figcaption></figure>
  <br>
  
  <p>Letâs look at another example:</p>
  
  <section>
    <pre><code class="language-kotlin">
  Column(
      modifier = Modifier.fillMaxSize(),
      verticalArrangement = Arrangement.Center,
      horizontalAlignment = Alignment.CenterHorizontally
  ) {
      val sections = arrayOf("Anime", "Manga", "Others")
      var visibleContent by rememberSaveable {
          mutableStateOf(sections[0])
      }
      Row(
          modifier = Modifier.fillMaxWidth(),
          horizontalArrangement = Arrangement.SpaceBetween
      ) {
          for (section in sections) {
              Button(onClick = { visibleContent = section }) {
                  Text(text = section)
              }
          }
      }
  
      Crossfade(
          targetState = visibleContent,
          label = ""
      ) { screen ->
          when (screen) {
              "Manga" -> Text(text = "Show Manga")
              "Anime" -> Text(text = "Show Anime")
              "Others" -> Text(text = "Show others")
          }
      }
  }
    </code></pre>
  </section>
  <br><br>
  
  <figure><img src="UD8/images/CrossFadeDemo2.gif" /><br><figcaption></figcaption></figure>
  <br>


  <h3>Modifier.animateContentSize</h3>
  <p>Android will animate the component when its size changes due to a change in its content.</p>
  
  <section><pre><code class="language-kotlin">var expanded by rememberSaveable {
      mutableStateOf(false)
  }
  Column(
      verticalArrangement = Arrangement.Top,
      modifier = Modifier
          .fillMaxWidth()
          .wrapContentHeight()
          .animateContentSize(animationSpec = tween(
              durationMillis = 2000,
              easing = LinearEasing
          ))
          .background(Color(0xFFFFA0C0))
          //.padding(10.dp)
  
  ) {
      Row(
          modifier = Modifier
              .background(Color.White)
              .fillMaxWidth(),
          horizontalArrangement = Arrangement.SpaceBetween,
          verticalAlignment = Alignment.CenterVertically
      ) {
          Text(text = "Son Goku")
          TextButton(onClick = {
              expanded = !expanded
          }) {
              Text(text = if(expanded) "Less." else "Read more...")
          }
      }
  
      Text(text = "Hey!")
      if(expanded){
          Spacer(modifier = Modifier.height(8.dp))
  
          Text(
              text = "Child Goku: A little one with a tail who has an innate ability to transform " +
                  "into a giant ape lacking reasoning skills and destroys everything in his path. " +
                  "His main defeated enemies were Pilaf, the Red Army soldiers, and the well-known " +
                  "Piccolo Daimao.\n\n" +
                  "Young Goku: Milk, a maiden heiress to the throne of a small town, marries Goku " +
                  "and they have their first son, Gohan, together. However, after a few years, his " +
                  "brother Raditz arrives on Earth with the sole mission of completely colonizing it, " +
                  "and a group of warriors unites to stop him. Goku loses his life for the first time " +
                  "and discovers the Kingdom of the Heavens.\n\n" +
                  "Adult Goku: Perhaps the most important moment in the history of this alien. Over " +
                  "about 10 years, Goku gains the superpower to transform into Super Saiyan 1, 2, 3, " +
                  "and the God forms.\n\n" +
                  "After the arrival of Beerus, the God of Destruction, Kakarotâs transformation " +
                  "rituals go beyond the mystical, reaching a power that measures up to the very " +
                  "creator of the entire universe.",
              textAlign = TextAlign.Justify
          )
      }
  }
  </code></pre></section>
  
  <figure><img src="UD8/images/ExpandedDemo.gif" /><br><figcaption></figcaption></figure>
  <br>
  
  </section><br>
  
  <h3>Customizing animations</h3>
  <p>Default animations come configured in a particular way, but they can be customized.</p>
  
  <p class="sub-section"><span class="negrita">animationSpec</span> parameter</p>
  <p>This parameter can be used in:</p>
  <ul>
    <li><span class="cursiva">animate*AsState</span>, <span class="cursiva">Crossfade</span>, and <span class="cursiva">Modifier.animateContentSize</span></li>
    <li><span class="cursiva">fadeX</span>, <span class="cursiva">slideX</span>, <span class="cursiva">scaleX</span>,
        <span class="cursiva">expandX</span>, and <span class="cursiva">shrinkX</span>
        allowed in the <span class="r-word">transitionSpec</span> parameter of <span class="r-word">AnimatedContent</span>.</li>
    <li><span class="cursiva">fadeX</span>, <span class="cursiva">slideX</span>, <span class="cursiva">scaleX</span>,
        <span class="cursiva">expandX</span>, and <span class="cursiva">shrinkX</span>
        allowed in the <span class="negrita">enter</span> and <span class="negrita">exit</span> parameters of <span class="cursiva">AnimatedContent</span>.</li>
  </ul>
  </p>
  
  <p>All the details about customizing animations can be found in the
  <a class="enlace" target="_blank" href="https://developer.android.com/jetpack/compose/animation/customize?hl=es-419">documentation</a>.</p>
  
  <p>Below are some basic examples:</p>
  
  <p>Physics-based animation: <a class="enlace" target="_blank" 
    href="https://developer.android.com/jetpack/compose/animation/customize?hl=es-419#spring">spring</a> (spring effect)
  </p>
  <figure><img src="UD8/images/ud8-2023-11-23-12-10-00.png" /><br><figcaption></figcaption></figure>
  <br>
  <ul>
    <li><span class="negrita">dampingRatio</span> indicates the bounce when reaching the target value.</li>
    <li><span class="negrita">stiffness</span> indicates the speed at which it moves toward the target value.</li>
  </ul>
  
  <p class="sub-section">Duration-based animation: <span class="negrita">tween</span> (between)</p>
  
  <figure><img src="UD8/images/ud8-2023-11-23-12-18-30.png" /><br><figcaption></figcaption></figure>
  <br>
  
  <p>Where:
  <ul>
    <li><span class="negrita">durationMillis</span>: animation duration.</li>
    <li><span class="negrita">easing</span>: indicates how the animation progresses between the two values.</li>
    <li><span class="negrita">delayMillis</span>: wait time before the animation starts.</li>
  </ul>  
  </p>
  
  <p class="sub-section">Repeating a duration-based animation (<span class="cursiva">tween</span>)</p>
  
  <p><span class="subrayado">With a set number of repetitions:</span></p>
  <figure><img src="UD8/images/ud8-2023-11-23-12-21-16.png" /><br><figcaption></figcaption></figure>
  <br>
  
  <p><span class="subrayado">With infinite repetitions:</span></p>
  <figure><img src="UD8/images/ud8-2023-11-23-12-22-41.png" /><br><figcaption></figcaption></figure>
  <br>
  

  </section><!-- End section Animaciones-->

  <!--*********************************************************PrÃ¡ctica***********************************************************-->
  <section class="apartado">
    <a name="sP03"></a>
    <h2>Practice 06. Free Application</h2>
  
    <a class="tarea" target="_blank" href="https://aules.edu.gva.es/fp/mod/assign/view.php?id=5367280">
      <p>
        Choose a theme and create a free application around that theme.
      </p>
      <p>The application does not need to be fully functional, but it must contain at least the following elements:
        <ul>
          <li>A SplashScreen. Find a logo and some text to display when starting the application. <br><span class="negrita">1 point</span></li>
          <li>An onboarding of 4 screens: in the first three, there will be an option to go to the next one or jump directly to the last. 
            On the fourth screen, we'll go directly to the appâs home. <br><span class="negrita">2 points</span>
          </li>
          <li>Application: It will have at least two screens in which information is passed from one to the other. <br><span class="negrita">1.5 points</span></li>
          <li>Implement two versions of the appâs screens (portrait and landscape). 
            (Not for the SplashScreen or Onboarding, but ensure these display correctly in both orientations.) <br>
            <span class="negrita">1.5 points</span>
          </li>
          <li>It must include at least one animation. <br><span class="negrita">1 point</span></li>
          <li>Change the default theme to colors and shapes of your choice. <br><span class="negrita">1 point</span></li>
        </ul>
      </p>
      <p><span class="negrita">Note:</span> In addition to meeting the above requirements, the app's visual appeal will be considered, as well as the organization of components and folders, code structure, and use of comments. 
        <br><span class="negrita">2 points</span></p>
    </a>
  
  </section><!-- End section PrÃ¡ctica-->
  
  <!---BTM_MENU--->
  <script src="../script/prism.js"></script>
</body>

</html>