<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starting With Android. My first App</title>
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/prism.css">
    <link rel="stylesheet" href="../styles/styles.css">
    <script src="../script/script.js"></script>
</head>
<body class="line-numbers">
    <h1>Starting With Android. My first App</h1>

    <div class="main-menu">
        <div class="fila">
            <a href="#sNewProject">Create an Android Project</a><a 
           href="#sProjectStructure">Project Structure</a><a 
           href="#sEditingLayout">Editing Layout</a>
        </div>
        <div class="fila">
            <a
           href="#sProgrammingAction">Programming Action</a><a
           href="#sPractice">Practice</a><a
           href="#sWebgrafia">Webgraphy</a>
        </div>
         
    </div>

    <br><br><br><br><br>
    <p>In this topic we are going to develop our first mobile application with Android Studio and Kotlin.</p>
    <p>You will learn:
        <ul>
            <li>How to <span class="d-word">create</span>  and <span class="d-word">run</span>  a project with Android Studio and also, how to debug applications.</li>
            <li>To know the <span class="d-word">structure</span>  of a project and its most relevant files.</li>
            <li>To use the most <span class="d-word">basic views</span> , and assign <span class="d-word">events</span>  to them.</li>
        </ul>
    </p>

    <figure><img src="imagenes/ud3_runningExample.gif" /><br><figcaption>Running sample</figcaption></figure>
    <br>

    <a class="enlace" target="_blank" href="https://github.com/sdram58/PMDM2021/tree/master/UD3_ClicksCounter">Link to github</a> 
    


    <!--*********************************************************Create an Android Project***********************************************************-->
    <section class="apartado">
    <a name="sNewProject"></a>
    <h2>Create an Android Project</h2>

    <p>In Android Studio, create a new project:</p>
    <section class="marco-t inf">
        <span class="icono info"> </span> <span class="negrita">If you haven't opened a project yet, on the <span class="negrita">welcome screen</span>, click 
        <span class="d-word">New  project</span> :</span>
        </section>
    <section class="marco-b">
        <figure><img src="imagenes/ud3-2021-09-25-13-06-29.png" /><br><figcaption></figcaption></figure>        
    </section>

    <section class="marco-t inf">
        <span class="icono info"> </span> <span class="negrita">If you have already opened a project: Go to <span class="negrita">File -> New -> New Project</span> </span>
        </section>
    <section class="marco-b">
        
            <figure><img src="imagenes/ud3-2021-09-25-13-12-39.png" /><br><figcaption></figcaption></figure>
            <br>
            
    </section>
           
    <br>
    <p>Choose the template for the <span class="negrita">main Activity</span>  of the App. For this practice choose <span class="d-word">Empty Activity</span> .</p>

    <figure><img src="imagenes/ud3-2021-09-25-13-17-15.png" /><br><figcaption></figcaption></figure>
    <br>
    
    <p>Fill the fields on the next screen. Remember in package name field to set your data, that is com.XXYYZZ.appname where XXYYZZ stands for two first letters of your name and surnames. For instance, some one named "Pedro Garc√≠a Marquez" should set <span class="cursiva">com.pegama.appName</span> </p>

    <figure><img src="imagenes/ud3-2021-09-25-13-31-53.png" /><br><figcaption></figcaption></figure>
    <br>

    <section class="marco-t inf">
        <span class="icono info"> </span> <span class="negrita">Minimum SDK</span>
        </section>
    <section class="marco-b">
            <p>It is the minimum version of Android that the devices must have in order to run the app. To support as many devices as possible, it should be set to the lowest possible version. However, the lower the version, the less modern android features the app can use.</p>
    </section>

</section>
        
    <!--*********************************************************Project Structure***********************************************************-->
    <section class="apartado">
    <a name="sProjectStructure"></a>
    <h2>Project Structure</h2>
    
    <p>The created project is a basic "Hello World" application that contains some <span class="negrita">default files</span>.</p>
    <figure><img src="imagenes/ud3-2021-09-25-19-05-02.png" /><br><figcaption>Main files and dirs in Android App</figcaption></figure>
    <br>
    
    <p>Let's have a look at the important ones:</p>
    <ul>
        <li>
            <section class="marco-t file-">
                <span class="icono file"> </span> <span class="negrita">app/src/main/<span class="subrayado">AndroidManifest.xml</span> </span>
                </section>
            <section class="marco-b">
                <p>The <span class="d-word">manifest</span>  file describes the fundamental characteristics of the application and defines each of its components. Here we will specify the Activities that our app has and the <span class="d-word">permissions</span>  it requires (Camera, Contacts, Internet, etc.)</p>        
            </section>
        </li>
        <li>
            <section class="marco-t file-">
                <span class="icono file"> </span> <span class="negrita">app/src/main/java/com.catata.clickscounter/<span class="subrayado">MainActivity.kt</span> </span>
                </section>
            <section class="marco-b">
                <p>Contains the class definition for the <span class="negrita">main</span>  <span class="r-word">Activity</span> (screen). In this file we will program the behavior of this Activity.</p>
            </section>
            
        </li>

        <li>
            <section class="marco-t file-">
                <span class="icono file"> </span> <span class="negrita">app/src/main/res/layout/<span class="subrayado">activity_main.xml</span></span>
                </section>
            <section class="marco-b">
                <p>This XML file defines the <span class="subrayado">layout of the activity</span>, that is, the elements (widgets) that belong to the screen. By default,
                     it contains a <span class="r-word">TextView</span>  element with the text <span class="cursiva">Hello world!</span> .</p>
            </section>
            
        </li>

        <li>
            <section class="marco-t file-">
                <span class="icono file"> </span> <span class="negrita">app/<span class="subrayado">build.gradle</span></span>
                </section>
            <section class="marco-b">
                 <p>Android Studio uses <span class="d-word">Gradle</span> to compile and build the application. 
                    There is a <span class="negrita">build.gradle</span> file for each module in the project, as well there is a <span class="negrita">build.gradle</span> 
                    file for the entire project. Usually we will only be interested in the <span class="negrita"><span class="subrayado">build.gradle (module: app)</span></span> file. 
                    That's where the app's build dependencies are, including the <span class="subrayado">defaultConfig settings</span>:
                </p>   
                <ul>
                    <li>
                        <p><span class="d-word">compiledSdkVersion</span>  is the version of the platform with which you are going to compile the application. 
                            By default, it is set to the latest version of the SDK installed on the computer.</p></li>
                        <li>
                            <p>
                                <span class="d-word">applicationId</span>  is the fully qualified package name for the application, which was specified in the New Project wizard.
                                </p>
                        </li>
                        <li>
                            <p><span class="d-word">minSdkVersion</span>  is the minimum SDK version specified during the New Project wizard. It is the oldest version of the Android SDK that the application supports.
                                </p>
                        </li>
                        <li>
                            <p><span class="d-word">targetSdkVersion</span>  indicates the highest version of Android that the application has been tested against.</p>
                        </li>
                </ul>

                <p>
                    Later we will use the <span class="negrita">build.gradle</span>  (module: app) file to install new libraries and components for our App, 
                    in the <span class="subrayado">dependencies section</span>.</p>
            </section>
            
        </li>
            
            

    </ul>
    
    <section class="marco-t folder-">
        <span class="icono folder"> </span> <span class="negrita">/res</span>
        </section>
    <section class="marco-b">
            <p>This folder contains resources for the App </p>
            <section class="marco-t folder-">
                <span class="icono folder"> </span> <span class="negrita">drawable/</span>
                </section>
            <section class="marco-b">
                    Images directory
            </section>
            

            <section class="marco-t folder-">
                <span class="icono folder"> </span> <span class="negrita">layout/</span>
                </section>
            <section class="marco-b">
                    <p>Directory for files that define the application's user interface, such as <span class="r-word">activity_main.xml</span> , which describes a basic layout for the <span class="negrita">MainActivity</span> </p>
            </section>
            <section class="marco-t folder-">
                <span class="icono folder"> </span> <span class="negrita">mipmap/</span>
                </section>
            <section class="marco-b">
                <p>Contains app launcher <span class="negrita">icons</span> </p>
            </section>
            <section class="marco-t folder-">
                <span class="icono folder"> </span> <span class="negrita">values/</span>
                </section>
            <section class="marco-b">
                <p>Directory for other XML files that contain a collection of resources.</p>
                    <ul>
                        <li>The colors of the app are defined in the <span class="negrita"><span class="r-word">colors.xml</span> </span>  file.</li>
                        <li>In the <span class="r-word">strings.xml</span>  file, all the texts that are displayed in our app are defined.</li>
                        <li>The <span class="r-word">styles.xml</span>  file defines the theme of our app.</li>
                        
                    </ul>
            </section>            
    </section>        
 </section>

 <!--*********************************************************Editing Layout***********************************************************-->
 <section class="apartado">
 <a name="sEditingLayout"></a>
 <h2>Editing Layout</h2>
 
 <p>In the XML files in the <span class="inline-folder">res/layout</span> folder, the layout of the <span class="cursiva">widgets</span> of the screens is defined.</p>
 <p>At the moment, in the <span class="inline-file">activity_main.xml</span> screen there is only one <span class="r-word">TextView</span>  that shows the text <span class="cursiva">Hello world</span>.</p>
    <p>To edit the layout files there are two ways:</p>    
    
    <ul>
        <li><span class="negrita">Graphic mode</span> : allows you to drag the widgets from the palette to the screen, and modify their attributes. <br><br></li>
        <li><span class="negrita">Code mode</span> : allows you to directly modify the XML code.</li>
    </ul>
    
   <p>Usually, we will work in code mode:</p>
    
    <ol style="list-style-position: inside; padding-left: 25px;">
        <li>Double click on the file <span class="inline-file">res/layout/activity_main.xml</span></li>
        <li>Click on the icon <img style="vertical-align: baseline;margin-top: 3px;" src="imagenes/ud3-2021-09-25-20-02-54.png" /> (or also Split ...) <br>
        <figure><img src="imagenes/ud3-2021-09-25-20-07-10.png" /><br><figcaption></figcaption></figure>
        <br>
        
        </li>
    </ol>
    
    <p>Next we are going to modify the layout as follows:                
        <ul>
            <li>The <span class="r-word">TextView</span>  that currently contains the <span class="cursiva">Hello World</span>  text, we will use it to display the counter</li>
            <li>We will add a button that, when pressed, will increase the counter</li>
        </ul>
    </p>


    <h3>TextView</h3>
    
    <p>To change the text that is displayed in a <span class="r-word">TextView</span> , you must modify the android: text attribute.</p>
    <p>Change the value of this attribute to text <span class="d-word">You have clicked 0 times</span> </p>

    <section><pre><code class="language-kotlin">android:text="Has clicado 0 veces"</code></pre></section><br><br>

    <figure><img src="imagenes/ud3-2021-09-26-10-57-16.png" /><br><figcaption>Modifing TextView from Layout</figcaption></figure>
    <br>
    
    <h3>Button</h3>
    <p>Also add the <span class="r-word">Button</span>  that, when pressed, will increase the <span class="negrita">counter</span> :</p>

    <section class="marco-t file-">
        <span class="icono file"> </span> <span class="negrita"> res/layout/activity_main.xml</span>
        </section>
    <section class="marco-b">
            <section><pre><code class="language-kotlin">&lt;Button
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Click me!"/></code></pre></section><br><br>
    </section>

    <figure><img src="./imagenes/ud3_addbutton.gif" /><br><figcaption></figcaption></figure>
    <br>
    <section class="marco-t inf">
        <span class="icono info"> </span> <span class="negrita">Some important properties</span>
        </section>
    <section class="marco-b">
        <ul>
       <p><li>The <span class="r-word">layout_width</span>  and <span class="r-word">layout_height</span>  attributes specify the 
        <span class="negrita">width</span>  and <span class="negrita">height</span>  of the element.</li></p>

        <p><li>The value <span class="r-word">wrap_content</span>  indicates that the width / height <span class="negrita">must be adapted</span>  to the content of the element.
           In the case of the <span class="r-word">Button</span>  and the <span class="r-word">TextView</span> , they must fit to the text that they contain.</p></li>
        <p><li>The value "<span class="r-word">match_parent</span> " indicates that the width / height <span class="negrita">must be the same</span>  as the parent element.</p></li>
        <p><li>You can also set a fixed size width / height in pixels or others units.</p>           </li>
        </ul>
    </section>
        
    <h3>Constraint Layout</h3>

    <p>In the current design of the layout we can see that the button layout is not <span class="cursiva">the most appropriate</span>:</p>

    <figure><img src="imagenes/ud3-2021-09-26-11-14-04.png" /><br><figcaption>Bad design</figcaption></figure>
    <br>
    
    <p><span class="cursiva">Maybe it would be better if the button was arranged below the TextView ...</span> </p>

    <p>To arrange the elements in a <span class="r-word">ConstraintLayout</span> , you have to define <span class="negrita">constraints</span> in each element.</p>
    <p>We can imagine constraints as <span class="negrita">springs</span> that pull an element in all four directions 
        (up, down, left, and right). The element is <span class="subrayado">positioned in equilibrium</span>  between the forces 
        of the springs that have been defined.</p>
    
    <p class="sub-section">TextView</p>
        
    <p>In the case of the <span class="r-word">TextView</span>  we see that there are already 
        four <span class="negrita">constraints</span>  defined:</p>

    <figure><img src="imagenes/ud3-2021-09-26-12-00-47.png" /><br><figcaption></figcaption></figure>
    <br>
    
    <p>In each constraint it is indicated where the "spring" should pull. We can see that:</p>
    <ul>

        <li>The <span class="r-word">constraintBottom</span>  pulls the TextView to the bottom (<span class="r-word">toBottomOf</span> ) of its <span class="negrita">parent</span> 
        (The <span class="negrita">parent</span>  element of the TextView is the ConstraintLayout).</li>
        <li>The <span class="r-word">constraintLeft</span>  pulls the TextView to the left (<span class="r-word">toLeftOf</span> ) of its <span class="negrita">parent</span> .</li>
        <li>The <span class="r-word">constraintRight</span>  pulls the TextView to the right (<span class="r-word">toRightOf</span> ) of its <span class="negrita">parent</span> .</li>
        <li>The <span class="r-word">constraintTop</span>  pulls the TextView to the top (<span class="r-word">toTopOf</span> ) of its <span class="negrita">parent</span> .</li>
    </ul>

    

    <figure><img src="imagenes/ud3-2021-09-26-12-10-04.png" /><br><figcaption></figcaption></figure>
    <br>
    
    <p>
        As we can see, the <span class="r-word">TextView</span>  is in vertical balance between the Top and Bottom constraints, and horizontal between Left and Right,
         and in this way it remains centered within the <span class="r-word">ConstraintLayout</span> .</p>


    <p class="sub-section">Button</p>
    
    <p>Now, we're going to define Button constraints to arrange it on this way</p>

    <figure><img src="imagenes/ud3-2021-09-26-12-13-29.png" /><br><figcaption>Button constraint</figcaption></figure>
    <br>
    
    <p>The button's <span class="r-word">constraintBottom</span>  will pull it towards the bottom of its parent (the ConstraintLayout).</p>
    <p>The <span class="r-word">constraintLeft</span>  to the left of its parent.</p>        
    <p>The <span class="r-word">constraintRight</span>  towards the right side of its parent.</p>
    <p>So far the thing is simple. It is enough to define the constraints as in the <span class="r-word">TextView</span> . These constraints all point to the parent element:</p>

    <figure><img src="imagenes/ud3-2021-09-26-12-16-06.png" /><br><figcaption>Constraints</figcaption></figure>
    <br>
    
    <p>In the <span class="r-word">constraintTop</span>  things change ...</p>
    <p>Notice in the image above that the <span class="r-word">constraintTop</span>  pulls the button to the bottom of the <span class="r-word">TextView</span>.</p>
    <p>To refer to the <span class="cursiva">parent element</span>  we have seen that we can use <span class="r-word">parent</span>. 
        But how do we reference the <span class="r-word">TextView</span>? To do this, you have to assign an <span class="negrita">identifier</span>  to the <span class="r-word">TextView</span>.</p>
    <p>To assign an <span class="negrita">identifier</span>  to an element, you must use the android: <span class="r-word">id</span>  attribute, and in the value you must put <span class="r-word"> @+id/</span>
        before the identifier that we want to assign to it.</p>
    <p>So, to assign the <span class="d-word">ClickCounter</span>  identifier to the <span class="r-word">TextView</span> , we will add this attribute:</p>

    <section><pre><code class="language-kotlin">android:id="@+id/clicksCounter"</code></pre>
    </section><br><br>

    <figure><img src="imagenes/ud3_addId.gif" /><br><figcaption></figcaption></figure>
    <br>
    <p>Now we can add the <span class="r-word">constraintTop</span>  to the button and make it pull it towards the bottom (<span class="r-word">toBottomOf</span> ) of the <span class="r-word">TextView</span>:</p>

    <section class="marco-t file-">
        <span class="icono file"> </span> <span class="negrita">res/layout/activity_main.xml</span>
        </section>
    <section class="marco-b">
        <section><pre><code class="language-kotlin">&lt;Button
  android:id="@+id/increaseCounter"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Click me!"
  app:layout_constraintTop_toBottomOf="@+id/clicksCounter"
  app:layout_constraintBottom_toBottomOf="parent"
  app:layout_constraintLeft_toLeftOf="parent"
  app:layout_constraintRight_toRightOf="parent"/> 
</code></pre>
        </section><br><br>
    </section>

    <section class="marco-t inf">
        <span class="icono info"> </span> <span class="negrita">
            We have also added the identifier <span class="d-word">increaseCounter</span>  to the button,
             since in the next section we will refer to this button from the Kotlin code.</span>
        </section>
    <section class="marco-b">
            
    </section>

    <p>Complet layout code of <span class="inline-file">activity_main.xml</span> look like this</p>

    <section class="marco-t file-">
        <span class="icono file"> </span> <span class="negrita">app/src/main/res/layout/activity_main.xml</span>
        </section>
    <section class="marco-b">
            <section><pre><code class="language-kotlin">&lt;?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    &lt;TextView
        android:id="@+id/clicksCounter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="You have clicked 0 times"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    &lt;Button
        android:id="@+id/increaseCounter
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click me!"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/clicksCounter" />

&lt;/android.support.constraint.ConstraintLayout></code></pre>
            </section><br><br>
    </section>
     
 </section> <!-- End section -->

 <!--*********************************************************Action programming***********************************************************-->
 <section class="apartado">
 <a name="sProgrammingAction"></a>
 <h2>Programming action</h2>

 <p>
    If you launch the app, you will see the <span class="cursiva">text</span>  and the <span class="cursiva">button</span>. 
    However, when you click the button, nothing happens. <span class="subrayado">The behavior of this button has not been defined</span>.</p>
    
 <p>To add a behavior to the <span class="d-word">button</span>  we must do it in the <span class="d-word">Kotlin</span>  code (or also Java). We will write the code in the <span class="inline-file">MainActivity.kt</span> file</p>
 <figure><img src="imagenes/ud3-2021-09-26-12-52-09.png" /><br><figcaption>MainActivity.kt</figcaption></figure>
 <br>
 
 <p>The <span class="d-word">MainActivity</span>  class is defined in this file, and in it the <span class="r-word">onCreate()</span> method.</p>
 <p>This <span class="r-word">onCreate()</span>  method is the one that the Android System executes first when our App starts.</p>
 <p>In this method the first thing you should look at is the call <span class="r-word">setContentView(R.layout.activity_main)</span> . 
    This call establishes the layout <span class="inline-file">activity_main.xml</span>, that is, what will be shown on the screen is what we have put in this layout file
     (the <span class="r-word">TextView</span>  and the <span class="r-word">Button</span> ).</p>
 
 <p>Once we have seen this, let's go to the necessary code for our counter. We will need:
     <ol>
         <li>An <span class="r-word">int</span>  variable that stores the <span class="negrita">counter</span> </li>
         <li>Program the <span class="r-word">Button</span>  to <span class="negrita">increase the counter</span>  and updates the <span class="r-word">TextView</span>  each time it is clicked</li>
     </ol>
 </p>
<p>Creating the variable to store the number of clicks is the simplest part:</p>
<section class="marco-t file-">
    <span class="icono file"> </span> <span class="negrita">MainActivity.kt</span>
    </section>
<section class="marco-b">
    <section><pre><code class="language-kotlin">class MainActivity : AppCompatActivity() {

    var counter = 0  //creates a inits counter variable

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }
}</code></pre>
    </section><br><br>
</section>

<h3>findViewById</h3>
<p> 
    To program the behavior of the <span class="r-word">Button</span> , and then update the text of the <span class="r-word">TextView</span> , 
    we will <span class="subrayado">need to have a reference</span>  to these two elements.
</p>
<p>
    To do this, we will <span class="negrita">define a variable for each element</span>  and call the <span class="r-word">findViewById()</span> 
     method to link these variables with the corresponding layout elements. The <span class="r-word">findViewById()</span>  method must be passed the 
     identifier that we have defined in the XML file.
</p>

<section class="marco-t file-">
    <span class="icono file"> </span> <span class="negrita"> MainActivity.kt</span>
    </section>
<section class="marco-b">
    <section><pre><code class="language-kotlin">class MainActivity : AppCompatActivity() {

    var counter = 0

    val tvClickCounter: TextView by lazy { findViewById<TextView>(R.id.clicksCounter) }
    //var tvClickCounter: TextView? = null

    lateinit var btnIncreaseCounter: Button

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        btnIncreaseCounter = findViewById(R.id.increaseCounter) as Button
        //tvClickCounter = findViewById(R.id.increaseCounter) as TextView
    }</code></pre>
    </section>

    <p><span class="cursiva">notice comment declaration</span> </p>
        
</section>

<section class="marco-t inf">
    <span class="icono info"> </span> <span class="negrita">
        Notice that the calls to <span class="r-word">findViewById()</span>  were made after setting the <span class="inline-file">activity_main.xml</span> layout. 
        The <span class="r-word">findViewById()</span>  method will look for the elements in this file.</span>
    </section>
<section class="marco-b">
        
</section>

<p class="sub-section">ViewBinding</p>
<p>Optionally, the <span class="d-word">ViewBinding</span>  can be activated to avoid having to make calls to <span class="r-word">findViewById()</span>
     to bind the elements of the XML with the Kotlin variables.
<p>Imagine that instead of 1 button and 1 textview, we have 10 buttons and 5 textviews ... that's 15 variables and 15 calls to <span class="negrita">findViewById</span>!!</p>
<p>To activate the <span class="d-word">ViewBinding</span> , go to the <span class="inline-file">build.gradle (Module: app)</span> file and add the following configuration:</p>

<section class="marco-t file-">
    <span class="icono file"> </span> <span class="negrita"> build.gradle (Module: app)</span>
    </section>
<section class="marco-b">
    <section><pre><code class="language-kotlin">android {
    // .......
    buildFeatures {
        viewBinding true
    }
}</code></pre>
</section><br><br>
</section>

<p>Then, you have to define a single variable and from this we can access the XML elements. You also have to modify the call to <span class="r-word">setContentView()</span> , as follows:</p>

<section class="marco-t file-">
    <span class="icono file"> </span> <span class="negrita"> MainActivity.kt</span>
    </section>
<section class="marco-b">
    <section><pre><code class="language-kotlin">class MainActivity : AppCompatActivity() {

    var counter = 0

    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        val view = binding.root

        setContentView(view)
        
    }
}</code></pre>
    </section><br><br>
</section>

<p>In this way, to access the <span class="r-word">Button</span>  and the <span class="r-word">TextView</span>  (or other elements that we had) we can do it directly through the <span class="negrita">binding</span> 
     variable and the identifier of the elements, like this:</p>
<section><pre><code class="language-kotlin">binding.clicksCounter
binding.increaseCounter</code></pre>
</section><br><br>
<section class="marco-t warn">
    <span class="icono warning"> </span> <span class="negrita">If you want a layout file to be ignored while generating binding classes, add there <span class="r-word"> tools: viewBindingIgnore = "true"</span> 
     attribute to the root view of that file:</span>
    </section>
<section class="marco-b">
    <section><pre><code class="language-kotlin">&lt;LinearLayout
    ...
    tools:viewBindingIgnore="true" >
    ...
&lt;/LinearLayout></code></pre>
    </section><br><br>
</section>


<h3>OnClickListener</h3>
<p>Once we have linked the <span class="r-word">Button</span>  and the <span class="r-word">TextView</span> , the next step is to program the action for the 
    button so that it responds to the <span class="negrita">CLICK</span>  (increasing the counter and displaying the text in the <span class="r-word">TextView</span> ).</p>
<p>For the <span class="negrita">button</span>  to respond to the <span class="negrita">CLICK</span>  event, call the <span class="r-word">setOnClickListener()</span>  
    method and pass it a <span class="r-word">View.OnClickListener</span>  class object. In the <span class="negrita">onClick()</span>  method of this object we will 
    program what we want to do when the button is pressed:</p>

<section class="marco-t file-">
    <span class="icono file"> </span> <span class="negrita">MainActivity.kt</span>
    </section>
<section class="marco-b">
        <section><pre><code class="language-kotlin">class MainActivity : AppCompatActivity() {

    var counter = 0

    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        val view = binding.root

        setContentView(view)


        binding.increaseCounter.setOnClickListener(){
            //TODO: Increase counter var
            //TODO: Set counter val into TextView (clicksCounter)
        }

    }
}</code></pre>
        </section><br><br>
</section>

<figure><img src="imagenes/ud3_setOnClick.gif" /><br><figcaption></figcaption></figure>
<br>

<section class="marco-t warn">
    <span class="icono warning"> </span> <span class="negrita">If you haven't used <span class="d-word">ViewBinding</span> , remember to declare <span class="cursiva">increaseCounter</span>  variable.</span>
    </section>
<section class="marco-b">
        
</section>

<p>Finally, the application code looks like this:</p>


<section class="marco-t file-">
    <span class="icono file"> </span> <span class="negrita">MainActivity.kt</span>
    </section>
<section class="marco-b">
    <section><pre><code class="language-kotlin">class MainActivity : AppCompatActivity() {

    var counter = 0
    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        val view = binding.root

        setContentView(view)

        binding.increaseCounter.setOnClickListener(){
            counter++;
            binding.clicksCounter.setText("You have clicked $counter times")
        }
    }
}</code></pre>
    </section><br><br>
</section>

<section class="marco-t warn">
    <span class="icono warning"> </span> <span class="negrita">If you haven't use <span class="r-word">ViewBinding</span>, the resulting code looks more or less like this:</span>
    </section>
<section class="marco-b">
    <section class="marco-t file-">
        <span class="icono file"> </span> <span class="negrita">MainActivity.kt</span>
        </section>
    <section class="marco-b">
        <section><pre><code class="language-kotlin">class MainActivity : AppCompatActivity() {

    var counter = 0

    private val tvClicksCounter:TextView by lazy { findViewById(R.id.clicksCounter) }
    private val btnIncreaseCounter:TextView by lazy { findViewById(R.id.increaseCounter) }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        setContentView(R.layout.activity_main)

        btnIncreaseCounter.setOnClickListener(){
            counter++;
            tvClicksCounter.setText("You have clicked $counter times")
        }
    }
}</code></pre>
        </section><br><br>
    </section>
</section>
 </section><!-- End section -->

 <!--*********************************************************MultiCounter Practice***********************************************************-->
 <section class="apartado">
 <a name="sPractice"></a>
 <h2>MultiCounter Practice</h2>
 
 <a class="tarea" target="_blank" href="#sPractice">Develop an app named <span class="d-word">P1_MultiCounter</span>  that functions as a people counter</a> 
 <figure><img src="imagenes/ud3-2021-09-26-19-23-22.png" /><br><figcaption>Multicounter</figcaption></figure>
 <br>
 

 <p>The app must have <span class="negrita">4 independent counters</span>  and a <span class="negrita">global counter</span>  (that takes the sum of the 4 counters).</p>
 <p>There should be a <span class="negrita">reset button</span>  for each counter and a global reset button that resets all 4 counters at the same time.</p>
 <p>There should also be a <span class="negrita">deacrease button</span> , but de careful that its counter doesn't drop below 0</p>
 <p>You can use the following app as a model for the multiconductor</p>
<figure><img src="imagenes/ud3_P1runningExample.gif" /><br><figcaption>Running sample</figcaption></figure>
<br>


 <p>
    In the following image you can see the <span class="negrita">constraints</span>  that have been defined in the layout:</p>

    

    <figure><img src="imagenes/ud3-2021-10-01-17-05-52.png" /><br><figcaption>Defined Constraints</figcaption></figure>
    <br>

    

<p><span class="negrita">Validate</span>  the layout of the elements in the <span class="r-word">ConstraintLayout</span>  using the <span class="d-word">"Layout Validator"</span>:</p>
 <figure><img src="imagenes/ud3-2021-09-26-20-31-47.png" /><br><figcaption>Layout Inspector</figcaption></figure>
 <br>
 
 <section class="marco-t inf">
    <span class="icono info"> </span> Use <span class="r-word"><span class="negrita">android:backgroundTint</span> </span> property to change background color of buttons
    </section>
<section class="marco-b">
        
</section>
    
 
 </section><!-- End section -->


<!--*********************************************************Webgraphy***********************************************************-->
<section class="apartado">
<a name="sWebgrafia"></a>
<h2>Webgraphy</h2>

<ul>
    <li><a class="enlace" target="_blank" href="https://gerardfp.github.io/apps/">Gerard's notes</a> </li>
    <li><a class="enlace" target="_blank" href="https://developer.android.com/topic/libraries/view-binding?hl=es-419#kotlin">Android developer. ViewBinding</a> </li>
    <li><a class="enlace" target="_blank" href="https://developer.android.com/training/constraint-layout">Android developer. Constraint Layout</a> </li>
</ul>




    


</section><!-- End section -->
    
        
    
    
    
    
         
    
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<script src="../script/prism.js"></script>
</body>
</html>
